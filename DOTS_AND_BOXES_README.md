# 点格棋游戏 (Dots and Boxes)

## 游戏简介

点格棋是一款经典的两人策略游戏，玩家轮流在相邻的点之间画线，当完成一个格子时，该格子即被占领。游戏的目标是占领比对手更多的格子。

## 游戏规则

1. **游戏目标**: 占领比对手更多的格子
2. **游戏人数**: 2人
3. **游戏流程**:
   - 玩家轮流在相邻两点之间画线
   - 当一方画下第四条边完成一个格子时，该格子即被此玩家占领
   - 占领格子的玩家必须紧接着画下一条边，直到其无法再占领格子为止
   - 当所有格子都被围成后，根据格子归属统计得分，占领格子多的一方获胜

## 游戏特性

### 核心功能
- ✅ 5x5点阵棋盘
- ✅ 两人轮流游戏
- ✅ 鼠标点击画线
- ✅ 自动检测完成的格子
- ✅ 实时分数显示
- ✅ 当前玩家提示
- ✅ 游戏结束判定

### 交互特性
- 🎯 鼠标悬停预览线条
- 🎨 不同颜色区分玩家（红色：玩家1，蓝色：玩家2）
- 📊 实时分数统计
- 🏆 游戏结束显示获胜者

### 视觉效果
- 🎮 悬停效果显示可画的线
- 🎨 占领的格子用半透明颜色填充
- 🔢 格子内显示占领玩家的数字标记
- 📱 响应式设计，适配不同屏幕尺寸

## 技术实现

### 游戏引擎
- **Phaser 3**: 使用Phaser.js游戏引擎
- **Canvas渲染**: 基于HTML5 Canvas的图形渲染

### 核心算法
- **点到线段距离计算**: 精确的鼠标点击检测
- **格子完成检测**: 自动检测四条边都画完的格子
- **游戏状态管理**: 完整的游戏状态跟踪

### 数据结构
```javascript
// 点阵数据结构
this.dots[row][col] = { x, y, row, col }

// 格子状态
this.boxes[row][col] = {
    owner: 0, // 0=未占领, 1=玩家1, 2=玩家2
    edges: { top, right, bottom, left } // 四条边的状态
}

// 线条数据
this.lines = [{ type, row, col, graphics }]
```

## 游戏截图

游戏界面包含：
- 顶部：分数显示和当前玩家提示
- 中央：5x5点阵棋盘
- 底部：游戏结束提示（当游戏结束时显示）

## 如何游玩

1. 打开游戏后，玩家1（红色）先手
2. 使用鼠标点击相邻两点之间的位置来画线
3. 当完成一个格子时，该格子会被当前玩家占领
4. 占领格子的玩家继续画线，直到无法再占领格子
5. 轮流进行，直到所有格子都被占领
6. 占领格子多的一方获胜

## 开发信息

- **开发语言**: JavaScript (ES6+)
- **游戏引擎**: Phaser 3.70.0
- **浏览器兼容**: 支持所有现代浏览器
- **移动设备**: 支持触摸操作

## 文件结构

```
js/games/dotsAndBoxes.js  # 点格棋游戏主文件
test-dots.html            # 独立测试页面
```

## 未来改进

- [ ] 添加音效
- [ ] 支持不同棋盘大小
- [ ] 添加AI对手
- [ ] 保存游戏进度
- [ ] 添加动画效果
- [ ] 支持键盘操作
